<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Activities - VCC</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">
        <img src="/static/images/logo.svg" alt="logo" class="logo" />
        <h1>Activities</h1>
      </div>
      <nav class="nav">
        <a class="btn-soft" href="/dashboard">Dashboard</a>
        <a class="btn-soft" href="/">Home</a>
      </nav>
    </header>
    <div class="container card">
      <p class="muted">Complete suggested activities to build skills for your target role. Mark items as completed when done.</p>
      <div id="activitiesRoot">
        <div class="activity-section" data-level="basic">
          <h3>Basic</h3>
          <div class="activity-list"></div>
        </div>
        <div class="activity-section" data-level="intermediate">
          <h3>Intermediate</h3>
          <div class="activity-list"></div>
        </div>
        <div class="activity-section" data-level="advanced">
          <h3>Advanced</h3>
          <div class="activity-list"></div>
        </div>
      </div>
    </div>

    <script>
      async function fetchActivities(){
        const resp = await fetch('/api/activities');
        const data = await resp.json();
        const list = data.activities || [];
        const sections = { basic: document.querySelector('[data-level="basic"] .activity-list'), intermediate: document.querySelector('[data-level="intermediate"] .activity-list'), advanced: document.querySelector('[data-level="advanced"] .activity-list') };
        for(const k of Object.keys(sections)) sections[k].innerHTML = '';
        list.forEach(a => {
          const el = document.createElement('div');
          el.className = 'activity-row';
          const status = a.status === 'completed' ? '<span style="color:#10b981">âœ” Completed</span>' : `<a class="start-btn" href="/quiz/${a.activityId}">Start Quiz</a>`;
          el.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center"><div><strong>${a.title}</strong><div class="muted">${a.detail || ''}</div></div><div>${status}</div></div>`;
          const level = (a.level||'basic').toLowerCase();
          (sections[level] || sections.basic).appendChild(el);
        });
      }
      fetchActivities();
    </script>
  </body>
</html>
